<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>فرار رنگ‌ها - نسخه الایت</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@200;700&display=swap" rel="stylesheet">
    <style>
    
        body {
            font-family: 'Cairo', sans-serif;
            background: linear-gradient(45deg, #f3ec78, #af4261);
            background-size: 200% 200%;
            animation: gradientAnimation 5s ease infinite;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            text-align: center;
            color: #fff;
            direction: rtl;
        }
        @keyframes gradientAnimation {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        h1 {
            font-size: 3em;
            margin-bottom: 10px;
            animation: bounce 2s infinite;
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        #game-area {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 20px;
        }
        .color-button {
            width: 100px;
            height: 100px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transform: scale(1);
            transition: transform 0.2s;
        }
        .color-button:hover {
            transform: scale(1.1);
        }
        #message {
            margin-top: 20px;
            font-size: 1.5em;
            font-weight: bold;
            transition: all 0.5s ease;
        }
        #score, #high-score {
            margin-top: 10px;
            font-size: 1.2em;
        }
        .start-button, .restart-button {
            margin-top: 20px;
            padding: 15px 20px;
            font-size: 1.2em;
            border: none;
            border-radius: 10px;
            background: linear-gradient(45deg, #ff416c, #ff4e50);
            color: white;
            cursor: pointer;
            font-family: 'Cairo', sans-serif;
            transition: all 0.4s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
        .start-button:hover, .restart-button:hover {
            transform: scale(1.15);
            background: linear-gradient(45deg, #ff758c, #ff616d);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.5);
        }
        .start-button.fade-out, .restart-button.fade-out {
            opacity: 0;
            transition: opacity 0.5s ease;
            pointer-events: none;
        }
        .time-bar {
            width: 80%;
            height: 20px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            margin-top: 15px;
            overflow: hidden;
            position: relative;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }
        .time-bar-inner {
            height: 100%;
            background: linear-gradient(90deg, #ff4e50, #f9d423);
            width: 100%;
            transition: width 0.1s linear;
            border-radius: 10px 0 0 10px;
            opacity: 1;
        }
        .time-bar-inner.start-animation {
            animation: fadeIn 1s forwards;
        }
        .time-bar-inner.end-animation {
            animation: fadeOut 1s forwards;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
        #controls {
            position: fixed;
            top: 50%;
            right: 10px;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .theme-button {
            background: linear-gradient(45deg, #4facfe, #00f2fe);
            border: none;
            padding: 10px 15px;
            font-size: 1em;
            color: white;
            border-radius: 8px;
            cursor: pointer;
            font-family: 'Cairo', sans-serif;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        .theme-button:hover {
            transform: scale(1.15) rotate(5deg);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
        }
        #guide-tab {
            position: fixed;
            top: 10px;
            left: 10px;
            background: linear-gradient(45deg, #007bff, #0056b3);
            color: white;
            font-size: 0.9em;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-family: 'Cairo', sans-serif;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease, background 0.3s ease;
            text-decoration: none;
        }
        #guide-tab:hover {
            transform: scale(1.1);
            background: linear-gradient(45deg, #3399ff, #0066cc);
        }
        .credits {
            position: fixed;
            bottom: 10px;
            left: 10px;
            font-size: 0.9em;
            color: rgba(255, 255, 255, 0.7);
            animation: fadeInCredits 2s ease-in-out infinite;
        }
        @keyframes fadeInCredits {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 1; }
            
        }
        .theme-button.dark {
    background: linear-gradient(45deg, #4facfe, #00f2fe);
    position: relative;
    transition: background 0.3s ease;
}

.theme-button.dark:disabled {
    cursor: not-allowed;
    opacity: 0.6;
}
    </style>
</head>
<body>
    <h1>فرار رنگ‌ها</h1>
    <p>منتظر شروع بازی هستیم! ⏰</p>
    <div class="time-bar">
        <div class="time-bar-inner" id="time-bar-inner"></div>
    </div>
    <button class="start-button" onclick="startGame()">🎮 شروع بازی</button>
    <div id="game-area">
        <!-- دکمه‌های رنگ در اینجا نمایش داده خواهند شد -->
    </div>
    <div id="message">منتظر شروع بازی هستیم!</div>
    <div id="score">امتیاز: 0</div>
    <div id="high-score">بهترین رکورد: 0</div>
    <div id="controls">
        <button class="theme-button" onclick="changeTheme('light')">🌞 تم روشن</button>
        <button class="theme-button" onclick="changeTheme('dark')">🌙 تم تاریک</button>
        <div id="theme-error" style="color: red; font-size: 0.9em; opacity: 0; transition: opacity 0.5s;">
            <!-- پیام خطا اینجا نمایش داده می‌شود -->
        </div>
        
    </div>

    <!-- تب راهنما -->
    <button id="guide-tab" onclick="showGuide()">📘 راهنما</button>
    <div class="credits">ساخته شده توسط سروش</div>
    <script>
        const colors = [
            { name: "قرمز", code: "red" },
            { name: "آبی", code: "blue" },
            { name: "سبز", code: "green" },
            { name: "زرد", code: "yellow" },
            { name: "بنفش", code: "purple" },
            { name: "نارنجی", code: "orange" },
            { name: "صورتی", code: "pink" },
            { name: "قهوه‌ای", code: "brown" },
            { name: "خاکستری", code: "gray" },
            { name: "سیاه", code: "black" },
            { name: "سفید", code: "white" }
        ];
    
        let targetColor = ""; // رنگ هدف
        let score = 0; // امتیاز فعلی بازیکن
        let highScore = localStorage.getItem("highScore") || 0; // بهترین رکورد ذخیره شده
        let timer; // مدیریت تایم‌لاین
        let timerDuration = 5000; // مدت زمان اولیه تایم‌لاین
    
        const gameArea = document.getElementById("game-area");
        const message = document.getElementById("message");
        const scoreDisplay = document.getElementById("score");
        const highScoreDisplay = document.getElementById("high-score");
        const timeBarInner = document.getElementById("time-bar-inner");
        const guideTab = document.getElementById("guide-tab");
    
        highScoreDisplay.innerText = `بهترین رکورد: ${highScore}`;
    
        function generateButtons() {
            gameArea.innerHTML = ""; // پاک کردن دکمه‌های قبلی
            colors.forEach(color => {
                const button = document.createElement("button");
                button.className = "color-button";
                button.style.backgroundColor = color.code;
                button.addEventListener("click", () => checkColor(color.name));
                gameArea.appendChild(button);
            });
        }
    
        function setTargetColor() {
            const randomColor = colors[Math.floor(Math.random() * colors.length)];
            targetColor = randomColor.name;
            message.innerText = `رنگ هدف: ${targetColor}`;
        }
    
        function checkColor(selectedColor) {
            if (selectedColor === targetColor) {
                score += 5;
                message.innerText = "آفرین! درست کلیک کردی 🎉";
                timerDuration = Math.max(2000, timerDuration - 200); // کاهش تدریجی مدت تایم‌لاین
            } else {
                score -= 50;
                message.innerText = "اشتباه کردی! 😔";
            }
    
            scoreDisplay.innerText = `امتیاز: ${score}`;
    
            if (score > highScore) {
                highScore = score;
                localStorage.setItem("highScore", highScore);
                highScoreDisplay.innerText = `بهترین رکورد: ${highScore}`;
            }
    
            clearTimeout(timer); // متوقف کردن تایمر قبلی
            startTimer(); // شروع دوباره تایمر
            setTargetColor(); // تنظیم رنگ هدف جدید
        }
    
        function startTimer() {
            timeBarInner.classList.remove("end-animation");
            timeBarInner.classList.add("start-animation");
            timeBarInner.style.opacity = "1";
    
            timeBarInner.style.width = "100%";
            let timeLeft = timerDuration;
            const interval = 50;
    
            timer = setInterval(() => {
                timeLeft -= interval;
                const percentage = (timeLeft / timerDuration) * 100;
                timeBarInner.style.width = `${percentage}%`;
    
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    timeBarInner.classList.add("end-animation");
                    endGame(); // پایان بازی در صورت اتمام تایم
                }
            }, interval);
        }
    
        function endGame() {
            message.innerText = "بازی تمام شد! 💀";
            gameArea.innerHTML = ""; // حذف دکمه‌های رنگ
            timeBarInner.style.opacity = "0"; // محو کردن تایم‌لاین
    
            // نمایش دکمه بازی مجدد
            const restartButton = document.createElement("button");
            restartButton.className = "restart-button";
            restartButton.innerText = "🔄 بازی مجدد";
            restartButton.onclick = () => {
                restartButton.remove(); // حذف دکمه بازی مجدد
                startGame(); // شروع دوباره بازی
            };
            document.body.appendChild(restartButton);
        }
    
        function startGame() {
            // محو کردن دکمه "شروع بازی"
            const startButton = document.querySelector(".start-button");
            if (startButton) {
                startButton.classList.add("fade-out");
    
                setTimeout(() => {
                    startButton.style.display = "none"; // حذف کامل دکمه پس از انیمیشن
                }, 500);
            }
    
            // بازنشانی امتیاز و تایمر
            score = 0;
            timerDuration = 5000; // بازنشانی تایمر به مقدار اولیه
            message.innerText = "بازی شروع شد! 🎯";
            scoreDisplay.innerText = `امتیاز: 0`;
    
            // تنظیم رنگ هدف اولیه و نمایش دکمه‌های رنگ
            setTargetColor();
            generateButtons();
    
            // شروع تایمر
            startTimer();
        }
    
        // مدیریت نمایش راهنما
        function showGuide() {
            alert(`در این بازی شما با کلیک بر روی رنگ هدف میتوانید امتیاز بگیرید!
    ضمنا هر باری که کلیک اشتباه داشته باشید، از شما 50 امتیاز کسر خواهد شد! مواظب باشید!
    با هر 5 حدس درست، سرعت بازی و تایم‌لاین کمتر میشود و زمان کمتری برای حدس زدن دارید!
    موفق باشید دوستان! 🎮`);
        }
    
        // نمایش تم ذخیره شده از قبل در localStorage
        function changeTheme(theme) {
    if (theme === 'dark') {
        if (highScore >= 250) {
            document.body.style.background = 'linear-gradient(45deg, #000000, #434343)';
            document.body.style.color = '#fff';
            alert("تم تاریک فعال شد!");
            // حذف قفل از روی دکمه
            const darkButton = document.querySelector('.theme-button.dark');
            darkButton.style.backgroundImage = 'none';
        } else {
            // نمایش پیام ارور
            const errorElement = document.getElementById("theme-error");
            errorElement.innerText = "باید بهترین رکورد شما بالای ۲۵۰ باشد!";
            errorElement.style.opacity = 1;
            setTimeout(() => {
                errorElement.style.opacity = 0;
            }, 3000);
            return;
        }
    } else if (theme === 'light') {
        document.body.style.background = 'linear-gradient(45deg, #f3f4f7, #6c757d)';
        document.body.style.color = '#000';
    }

    localStorage.setItem("theme", theme);
}

function updateDarkButtonState() {
    const darkButton = document.querySelector('.theme-button.dark');
    if (highScore < 250) {
        darkButton.style.backgroundImage = "url('lock-icon.png')"; // مسیر آیکون قفل
        darkButton.style.backgroundRepeat = "no-repeat";
        darkButton.style.backgroundPosition = "center";
        darkButton.disabled = true;
    } else {
        darkButton.style.backgroundImage = "none";
        darkButton.disabled = false;
    }
}

// فراخوانی این تابع هنگام بارگذاری صفحه
updateDarkButtonState();
    </script>
</body>
</html>
    
